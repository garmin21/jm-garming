---
title: 3-07 React中路由的使用2
date: '2023-03-07'
categories:
    - React
tags:
    - React
publish: true
---

```json
{
    "react": "^18.2.0",
    "react-dom": "^18.2.0",
    "react-router-dom": "^6.8.2"
}
```

## 1. 路由重定项

使用 `Navigate` 组件进行重定向

```tsx
const router = createBrowserRouter([
    {
        path: '/',
        element: <Root />,
        errorElement: <ErrorPage />,
        loader: loaderData,
        children: [
            {
                index: true, // <-- match on parent, i.e. "/"
                element: <Navigate to="/preview" replace />, // <-- redirect
            },
            {
                path: 'contacts/:contactId',
                element: <About />,
                loader: ({ params }) => {
                    console.log({ params }, '{ params }====>')

                    return params
                },
                action: actionData,
            },

            {
                path: 'preview',
                element: <Preview />,
            },
        ],
    },
    {
        path: '/formily',
        element: <Formily />,
    },
])
```

在 `loader` 中进行初始化跳转

```tsx
<Route
    path="dashboard"
    loader={async () => {
        const user = await fake.getUser()
        if (!user) {
            // if you know you can't render the route, you can
            // throw a redirect to stop executing code here,
            // sending the user to a new route
            throw redirect('/login')
        }

        // otherwise continue
        const stats = await fake.getDashboardStats()
        return { user, stats }
    }}
/>
```

使用

```tsx
import { useNavigate } from 'react-router-dom'
import { useEffect } from 'react'

export function Root() {
    const navigate = useNavigate()
    // TODO: 必须在dom已经加载完毕后进行重定向
    useEffect(() => {
        navigate('preview', {
            replace: true,
        })
    }, [])

    return <></>
}
```

## 2.

## 3.

## 4.

## 参考文章
