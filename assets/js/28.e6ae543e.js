(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{606:function(t,e,s){"use strict";s.r(e);var a=s(10),v=Object(a.a)({},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h2",{attrs:{id:"简介"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#简介"}},[t._v("#")]),t._v(" 简介")]),t._v(" "),s("p",[t._v("vite 其实就是一个由原生 ES Module 驱动的新型 Web 开发前端构建工具。vite 插件 就可以很好的扩展 vite 自身不能做到的事情，比如 文件图片的压缩、 对 commonjs 的支持、 打包进度条 等等。")]),t._v(" "),s("h2",{attrs:{id:"_1-创建一个简单的-vite-模板"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-创建一个简单的-vite-模板"}},[t._v("#")]),t._v(" 1. 创建一个简单的 vite 模板")]),t._v(" "),s("div",{staticClass:"language-ts extra-class"},[s("pre",{pre:!0,attrs:{class:"language-ts"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("type")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" PluginOption "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'vite'")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("dome")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" PluginOption "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        name"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'vite-plugin-test'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("插件其实就是一个函数，导出一个函数，返回，在 vite "),s("code",[t._v("plugins")]),t._v(" 中应用即可")]),t._v(" "),s("h2",{attrs:{id:"_2-了解插件的各个钩子的作用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-了解插件的各个钩子的作用"}},[t._v("#")]),t._v(" 2. 了解插件的各个钩子的作用")]),t._v(" "),s("h3",{attrs:{id:"vite-独有的钩子"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#vite-独有的钩子"}},[t._v("#")]),t._v(" vite 独有的钩子")]),t._v(" "),s("ol",[s("li",[s("code",[t._v("enforce")]),t._v(" ：值可以是 pre 或 post ， pre 会较于 post 先执行；")]),t._v(" "),s("li",[s("code",[t._v("apply")]),t._v(" ：值可以是 build 或 serve 亦可以是一个函数，指明它们仅在 build 或 serve 模式时调用；")]),t._v(" "),s("li",[s("code",[t._v("config(config, env)")]),t._v(" ：可以在 vite 被解析之前修改 vite 的相关配置。钩子接收原始用户配置 config 和一个描述配置环境的变量 env；")]),t._v(" "),s("li",[s("code",[t._v("configResolved(resolvedConfig)")]),t._v(" ：在解析 vite 配置后调用。使用这个钩子读取和存储最终解析的配置。当插件需要根据运行的命令做一些不同的事情时，它很有用。")]),t._v(" "),s("li",[s("code",[t._v("configureServer(server)")]),t._v(" ：主要用来配置开发服务器，为 dev-server (connect 应用程序) 添加自定义的中间件；")]),t._v(" "),s("li",[s("code",[t._v("transformIndexHtml(html)")]),t._v(" ：转换 index.html 的专用钩子。钩子接收当前的 HTML 字符串和转换上下文；")]),t._v(" "),s("li",[s("code",[t._v("handleHotUpdate(ctx)")]),t._v("：执行自定义 HMR 更新，可以通过 ws 往客户端发送自定义的事件；")])]),t._v(" "),s("h3",{attrs:{id:"vite-与-rollup-的通用钩子之构建阶段"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#vite-与-rollup-的通用钩子之构建阶段"}},[t._v("#")]),t._v(" vite 与 rollup 的通用钩子之构建阶段")]),t._v(" "),s("ol",[s("li",[s("code",[t._v("options(options)")]),t._v(" ：在服务器启动时被调用：获取、操纵 Rollup 选项，严格意义上来讲，它执行于属于构建阶段之前")]),t._v(" "),s("li",[s("code",[t._v("buildStart(options)")]),t._v("：在每次开始构建时调用；")]),t._v(" "),s("li",[s("code",[t._v("resolveId(source, importer, options)")]),t._v(" ：在每个传入模块请求时被调用，创建自定义确认函数，可以用来定位第三方依赖；")]),t._v(" "),s("li",[s("code",[t._v("load(id)")]),t._v(" ：在每个传入模块请求时被调用，可以自定义加载器，可用来返回自定义的内容；")]),t._v(" "),s("li",[s("code",[t._v("transform(code, id)")]),t._v(" ：在每个传入模块请求时被调用，主要是用来转换单个模块 相当于 (webpack loader)")]),t._v(" "),s("li",[s("code",[t._v("buildEnd(error?: Error)")]),t._v(" ：在构建阶段结束后被调用，此处构建结束只是代表所有模块转义完成；")])]),t._v(" "),s("h2",{attrs:{id:"vite-与-rollup-的通用钩子之输出阶段"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#vite-与-rollup-的通用钩子之输出阶段"}},[t._v("#")]),t._v(" vite 与 rollup 的通用钩子之输出阶段")]),t._v(" "),s("ol",[s("li",[s("p",[s("code",[t._v("outputOptions")]),t._v(" 方法用于更改 Vite 输出选项的默认设置。它接受一个默认输出选项对象，该对象包含有关如何生成输出文件的信息")])]),t._v(" "),s("li",[s("p",[s("code",[t._v("renderStart")]),t._v(" 方法是 Vite 插件的生命周期方法之一，用于在服务器端重新渲染页面之前执行一些操作")])]),t._v(" "),s("li",[s("p",[s("code",[t._v("augmentChunkHash")]),t._v(" 方法是 Vite 插件的一个生命周期方法，用于在 Vite 构建期间更改或增强块哈希值")])]),t._v(" "),s("li",[s("p",[s("code",[t._v("renderChunk")]),t._v(" 方法是 Vite 插件的生命周期方法之一，用于更改构建后的块内容。")])]),t._v(" "),s("li",[s("p",[s("code",[t._v("generateBundle")]),t._v(" 方法是 Vite 插件的生命周期方法之一，用于在构建结束后生成输出文件。")])]),t._v(" "),s("li",[s("p",[s("code",[t._v("writeBundle")]),t._v(" 方法是 Vite 插件的生命周期方法之一，用于在构建完成后，将输出文件写入磁盘。")])]),t._v(" "),s("li",[s("p",[s("code",[t._v("closeBundle")]),t._v(" 方法是 Vite 插件的生命周期方法之一，用于在生成捆绑包后，执行任何必要的清理操作")])])]),t._v(" "),s("h2",{attrs:{id:"vite-插件的-钩子执行顺序"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#vite-插件的-钩子执行顺序"}},[t._v("#")]),t._v(" vite 插件的 钩子执行顺序")]),t._v(" "),s("h2",{attrs:{id:"参考"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#参考"}},[t._v("#")]),t._v(" 参考")]),t._v(" "),s("ul",[s("li",[s("p",[s("a",{attrs:{target:"_blank",href:"https://www.cnblogs.com/ygunoil/p/15218106.html"}},[t._v("如何开发一个 vite 插件")])])]),t._v(" "),s("li",[s("p",[s("a",{attrs:{target:"_blank",href:"https://segmentfault.com/a/1190000041578690"}},[t._v("点击页面元素,这个 Vite 插件帮我打开了 Vue 组件 🚀")])])]),t._v(" "),s("li",[s("p",[s("a",{attrs:{target:"_blank",href:"https://juejin.cn/post/7110920974379253791"}},[t._v("为了让 vite 打包更顺畅，我开发了这个 vite 插件")])])]),t._v(" "),s("li",[s("p",[s("a",{attrs:{target:"_blank",href:"https://juejin.cn/post/7075678169122439181"}},[t._v("Vite 实战：手把手教你写一个 Vite 插件")])])]),t._v(" "),s("li",[s("p",[s("a",{attrs:{target:"_blank",href:"https://juejin.cn/post/7103165205483356168#heading-19"}},[t._v("https://juejin.cn/post/7103165205483356168#heading-19")])])])])])}),[],!1,null,null,null);e.default=v.exports}}]);