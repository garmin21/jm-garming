(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{608:function(t,a,s){"use strict";s.r(a);var e=s(10),r=Object(e.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("p",[t._v("使用 mkcert 为 vite https 开发服务提供证书支持。")]),t._v(" "),s("h2",{attrs:{id:"什么时候应该使用该插件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#什么时候应该使用该插件"}},[t._v("#")]),t._v(" 什么时候应该使用该插件")]),t._v(" "),s("ol",[s("li",[t._v("当你希望使用 "),s("code",[t._v("http/2")]),t._v(" 解决 vite http dev server 请求的并发限制时，却发现浏览器缓存无效的情况 "),s("a",{attrs:{href:"https://github.com/vitejs/vite/issues/2725",target:"_blank",rel:"noopener noreferrer"}},[t._v("#2725"),s("OutboundLink")],1),t._v("。")]),t._v(" "),s("li",[t._v("有强迫症，希望浏览器不要出现烦人的 https 证书错误。")])]),t._v(" "),s("h2",{attrs:{id:"效果"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#效果"}},[t._v("#")]),t._v(" 效果")]),t._v(" "),s("details",[s("summary",[t._v("查看")]),t._v(" "),s("p",[s("img",{attrs:{src:"docs/assets/screenshot/localhost.png",alt:"localhost"}})]),t._v(" "),s("p",[s("img",{attrs:{src:"docs/assets/screenshot/127.0.0.1.png",alt:"127.0.0.1"}})]),t._v(" "),s("p",[s("img",{attrs:{src:"docs/assets/screenshot/localip.png",alt:"localhost"}})])]),t._v(" "),s("h2",{attrs:{id:"快速开始"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#快速开始"}},[t._v("#")]),t._v(" 快速开始")]),t._v(" "),s("ol",[s("li",[t._v("安装依赖")])]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" vite-plugin-mkcert -D\n")])])]),s("ol",{attrs:{start:"2"}},[s("li",[t._v("配置 vite")])]),t._v(" "),s("div",{staticClass:"language-ts extra-class"},[s("pre",{pre:!0,attrs:{class:"language-ts"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" defineConfig "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'vite'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" mkcert "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'vite-plugin-mkcert'")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// https://vitejs.dev/config/")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("defineConfig")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    server"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        https"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    plugins"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("mkcert")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("h2",{attrs:{id:"参数"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#参数"}},[t._v("#")]),t._v(" 参数")]),t._v(" "),s("h3",{attrs:{id:"hosts"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#hosts"}},[t._v("#")]),t._v(" hosts")]),t._v(" "),s("p",[t._v("自定义域名，默认使用 "),s("code",[t._v("localhost")]),t._v(" + 本地 ip 列表。")]),t._v(" "),s("h3",{attrs:{id:"force"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#force"}},[t._v("#")]),t._v(" force")]),t._v(" "),s("p",[t._v("是否强制重新生成证书。")]),t._v(" "),s("h3",{attrs:{id:"autoupgrade"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#autoupgrade"}},[t._v("#")]),t._v(" autoUpgrade")]),t._v(" "),s("p",[t._v("是否自动升级 "),s("code",[t._v("mkcert")]),t._v("。")]),t._v(" "),s("h3",{attrs:{id:"source"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#source"}},[t._v("#")]),t._v(" source")]),t._v(" "),s("p",[t._v("指定 "),s("code",[t._v("mkcert")]),t._v(" 的下载源，国内用户可以设置成 "),s("code",[t._v("coding")]),t._v(" 从 coding.net 镜像下载，也可以提供一个自定义的 "),s("a",{attrs:{href:"plugin/mkcert/Source.ts"}},[t._v("BaseSource")]),t._v("。")]),t._v(" "),s("h3",{attrs:{id:"mkcertpath"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#mkcertpath"}},[t._v("#")]),t._v(" mkcertPath")]),t._v(" "),s("p",[t._v("如果网络受限的话，可以指定一个本地的 "),s("code",[t._v("mkcert")]),t._v(" 文件来代替网络下载。")]),t._v(" "),s("h3",{attrs:{id:"savepath"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#savepath"}},[t._v("#")]),t._v(" savePath")]),t._v(" "),s("p",[t._v("保存文件的路径，比如下载的 mkcert 程序以及生成的 CA 文件、私钥跟证书文件等等。默认值是 "),s("a",{attrs:{href:"plugin/lib/constant.ts"}},[t._v("PLUGIN_DATA_DIR")])]),t._v(" "),s("h3",{attrs:{id:"keyfilename"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#keyfilename"}},[t._v("#")]),t._v(" keyFileName")]),t._v(" "),s("p",[t._v("私钥的文件名")]),t._v(" "),s("h3",{attrs:{id:"certfilename"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#certfilename"}},[t._v("#")]),t._v(" certFileName")]),t._v(" "),s("p",[t._v("证书的文件名")]),t._v(" "),s("h2",{attrs:{id:"移动端设备使用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#移动端设备使用"}},[t._v("#")]),t._v(" 移动端设备使用")]),t._v(" "),s("p",[t._v("为了使证书在移动设备上被信任，你必须安装根证书 "),s("code",[t._v("rootCA.pem")]),t._v(" 文件。可以使用 "),s("code",[t._v("mkcert -CAROOT")]),t._v(" 命令打印它所在的文件夹。")]),t._v(" "),s("p",[t._v("在 iOS 上，你可以使用 AirDrop 隔空投送，或者用 CA 用电子邮件发给自己，或者从 HTTP 服务器上提供。打开后，你需要"),s("a",{attrs:{href:"https://github.com/FiloSottile/mkcert/issues/233#issuecomment-690110809",target:"_blank",rel:"noopener noreferrer"}},[t._v("在设置>已下载描述文件中安装配置文件"),s("OutboundLink")],1),t._v("，然后"),s("a",{attrs:{href:"https://support.apple.com/zh-cn/HT204477",target:"_blank",rel:"noopener noreferrer"}},[t._v("对其启用完全信任"),s("OutboundLink")],1),t._v("。")]),t._v(" "),s("p",[t._v("对于安卓系统，安装根证书 CA ，然后在你的应用程序的开发构建中启用用户根证书。见 "),s("a",{attrs:{href:"https://stackoverflow.com/a/22040887/749014",target:"_blank",rel:"noopener noreferrer"}},[t._v("StackOverflow 的答案"),s("OutboundLink")],1),t._v("。")]),t._v(" "),s("h2",{attrs:{id:"显示插件的调试信息"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#显示插件的调试信息"}},[t._v("#")]),t._v(" 显示插件的调试信息")]),t._v(" "),s("p",[t._v("设置环境变量 "),s("code",[t._v("DEBUG")]),t._v("="),s("code",[t._v("vite:plugin:mkcert")])]),t._v(" "),s("h2",{attrs:{id:"更新日志"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#更新日志"}},[t._v("#")]),t._v(" 更新日志")]),t._v(" "),s("p",[s("RouterLink",{attrs:{to:"/category/buildTools/vite/CHANGELOG.html"}},[t._v("CHANGELOG")])],1),t._v(" "),s("h2",{attrs:{id:"原理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#原理"}},[t._v("#")]),t._v(" 原理")]),t._v(" "),s("p",[t._v("使用 "),s("a",{attrs:{href:"https://github.com/FiloSottile/mkcert",target:"_blank",rel:"noopener noreferrer"}},[t._v("mkcert"),s("OutboundLink")],1),t._v(" 安装本地 "),s("code",[t._v("CA")]),t._v(" 证书，并为 "),s("a",{attrs:{href:"https://vitejs.bootcss.com/config/#server-https",target:"_blank",rel:"noopener noreferrer"}},[t._v("server.https"),s("OutboundLink")],1),t._v(" 生成服务端证书。")]),t._v(" "),s("h2",{attrs:{id:"友情提示"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#友情提示"}},[t._v("#")]),t._v(" 友情提示")]),t._v(" "),s("ol",[s("li",[t._v("卸载 "),s("code",[t._v("CA")]),t._v(" 证书："),s("code",[t._v("mkcert -uninstall")])])]),t._v(" "),s("h2",{attrs:{id:"感谢"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#感谢"}},[t._v("#")]),t._v(" 感谢")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://github.com/FiloSottile/mkcert",target:"_blank",rel:"noopener noreferrer"}},[t._v("mkcert"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://github.com/daquinoaldo/https-localhost",target:"_blank",rel:"noopener noreferrer"}},[t._v("daquinoaldo/https-localhost"),s("OutboundLink")],1)])])])}),[],!1,null,null,null);a.default=r.exports}}]);